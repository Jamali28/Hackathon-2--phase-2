---
id: 3
title: Update Project Constitution v1.0.0
stage: constitution
date: 2026-01-06
surface: agent
model: claude-sonnet-4-5-20250929
feature: none
branch: master
user: muhee
command: /sp.constitution
labels: [constitution, governance, hackathon]
links:
  spec: null
  ticket: null
  adr: null
  pr: null
files:
  - .specify/memory/constitution.md
tests:
  - none
---

## Prompt

<command-message>sp.constitution</command-message>
<command-name>/sp.constitution</command-name>
<command-args>You are operating under the strict **Project Constitution** for the "Todo Full-Stack Web Application" (Phase 2) in a hackathon setting.

This constitution is derived directly from the official project documentation and must be followed without exception.

=== PROJECT CONSTITUTION (sp.constitution) ===

1. **Core Objective**
   Transform the Phase 1 console Todo app into a modern multi-user full-stack web application with persistent storage, using only spec-driven, agentic development.

2. **No Manual Coding Allowed**
   All code must be generated by agents (Claude Code + specialized sub-agents).
   Human may only write or update specifications in /specs/.
   The process, prompts, iterations, and agent delegation will be evaluated.

3. **Technology Stack (Mandatory)**
   - Frontend: Next.js 16+ (App Router), TypeScript, Tailwind CSS
   - Backend: Python FastAPI
   - ORM: SQLModel
   - Database: Neon Serverless PostgreSQL
   - Authentication: Better Auth (Next.js) with JWT plugin
   - Development: Spec-Kit Plus + Claude Code in monorepo

4. **Monorepo Structure (Must Match Exactly)**
   hackathon-todo/
   â”œâ”€â”€ .spec-kit/config.yaml
   â”œâ”€â”€ specs/
   â”‚   â”œâ”€â”€ overview.md
   â”‚   â”œâ”€â”€ architecture.md
   â”‚   â”œâ”€â”€ features/
   â”‚   â”‚   â”œâ”€â”€ authentication.md
   â”‚   â”‚   â””â”€â”€ task-crud.md
   â”‚   â”œâ”€â”€ api/rest-endpoints.md
   â”‚   â”œâ”€â”€ database/schema.md
   â”‚   â””â”€â”€ ui/
   â”œâ”€â”€ agents/              # 7 specialized agents as .md files
   â”œâ”€â”€ skills/              # 6 reusable skill patterns as .md files
   â”œâ”€â”€ frontend/
   â”œâ”€â”€ backend/
   â”œâ”€â”€ CLAUDE.md            # Root instructions
   â””â”€â”€ docker-compose.yml

5. **Agentic Workflow (Strict Order)**
   1. @agents/spec-writer.md â†’ writes/updates specs
   2. @agents/orchestrator.md â†’ creates plan, breaks into tasks, delegates
   3. Specialists (@agents/auth-specialist.md, database-architect.md, etc.) implement
   4. All agents MUST load and apply @skills/*.md patterns when relevant
   5. @agents/tester.md â†’ final validation

6. **Authentication & Security Rules**
   - Better Auth issues JWT tokens (via JWT plugin)
   - Shared secret: BETTER_AUTH_SECRET environment variable (same in frontend & backend)
   - Frontend attaches Authorization: Bearer <token> to all API calls
   - Backend verifies JWT with PyJWT, extracts user_id, filters ALL queries by user_id
   - No endpoint exposes or modifies another user's data
   - Invalid/missing token â†’ 401 Unauthorized

7. **API Design**
   - Clean paths: /api/tasks (NOT /api/{user_id}/tasks)
   - User context comes from verified JWT
   - Support query params: status=all|pending|completed, sort=created|title

8. **Spec-Driven Development**
   - Always read relevant @specs/*.md before implementing
   - Reference specs with @specs/path/to/file.md
   - If requirements change â†’ update spec first

9. **Agent & Skill Usage**
   - Delegate using @agents/name.md
   - Apply patterns using @skills/name.md
   - All agents and skills are physical .md files in the repo

10. **Final Deliverable**
    A complete, working, secure full-stack Todo app with:
    - User signup/signin
    - Task CRUD with full user isolation
    - Responsive frontend
    - Persistent Neon DB
    - All code generated via documented agentic process

=== END OF CONSTITUTION ===

You must adhere to this constitution at all times. Reference it as sp.constitution when needed.

Constitution loaded. Ready to begin spec-driven implementation.</command-args>

## Response snapshot

I have updated the project constitution at `.specify/memory/constitution.md` to reflect the strict hackathon rules for Phase 2. This include the mandatory tech stack (Next.js, FastAPI, Neon DB, Better Auth), the strict monorepo structure, and the agentic workflow requirements. I have also added a Sync Impact Report and set the version to 1.0.0.

## Outcome

- âœ… Impact: Established definitive governance and technical constraints for the hackathon.
- ğŸ§ª Tests: none
- ğŸ“ Files: Updated .specify/memory/constitution.md
- ğŸ§  Reflection: The constitution now serves as a hard constraint for all sub-agents, ensuring compliance with hackathon rules.
